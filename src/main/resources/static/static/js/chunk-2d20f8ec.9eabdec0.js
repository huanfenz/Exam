(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f8ec"],{b3af:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-col",{attrs:{span:14,offset:5}},[t("el-card",{staticStyle:{height:"450px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("修改信息")])]),t("el-row",[t("el-col",{attrs:{span:16}},[t("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.form.username,callback:function(s){e.$set(e.form,"username",s)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("div",{attrs:{align:"center"}},[t("h3",[e._v("点击下方图片上传头像")]),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://47.97.104.230:8093/system/upload/uploadImage","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.profile?t("el-image",{staticClass:"avatar",attrs:{src:e.form.profile,alt:"封面无法显示"}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)])],1),t("div",{staticStyle:{"margin-top":"80px",float:"right"}},[t("el-button",{on:{click:e.cancelAlert}},[e._v("取消修改")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存修改")])],1)],1)],1)],1)],1)},a=[],o=t("5530"),l=t("2f62"),n=t("c0c7"),i={name:"PersonInfo",data:function(){return{form:{id:null,username:null,password:null,role:"管理员",profile:null},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:Object(o["a"])({},Object(l["b"])(["id","name","roles","avatar"])),created:function(){var e=this;Object(n["c"])(this.id).then((function(s){200===s.status&&(e.form=s.data)}))},methods:{submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(s){if(!s)return e.$message.error("不允许提交，请检查必填项"),!1;Object(n["g"])(e.form).then((function(s){200===s.status?(e.$message.success("修改个人信息成功"),e.dialogFormVisible=!1,e.$store.state.user.avatar=e.form.profile,e.$store.state.user.username=e.form.username,e.$store.state.user.password=e.form.password):501===s.status?e.$message.error(s.message):e.$message.error("修改个人信息失败")}))}))},cancelAlert:function(){var e=this;Object(n["c"])(this.id).then((function(s){200===s.status&&(e.form=s.data)}))},beforeAvatarUpload:function(e){var s="image/jpeg"===e.type,t="image/png"===e.type,r=e.size/1024/1024<2;return s||t?!!r||(this.$message.error("上传封面图片大小不能超过 2MB!"),!1):(this.$message.error("只能上传 jpg 和 png 图片"),!1)},handleAvatarSuccess:function(e,s){console.log(s),200===e.status?(this.$message.success(e.message),this.form.profile=e.data):this.$message.error(e.message)}}},c=i,u=t("2877"),m=Object(u["a"])(c,r,a,!1,null,"2bde8b92",null);s["default"]=m.exports}}]);