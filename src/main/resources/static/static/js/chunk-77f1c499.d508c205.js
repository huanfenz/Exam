(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77f1c499"],{"2ddc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"15px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"考试名"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}}),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"考试开始时间","end-placeholder":"考试结束时间"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" 搜索 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleShowAll}},[e._v(" 显示全部 ")])],1),a("el-dialog",{attrs:{title:"考试信息",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("p",[e._v("考试名称："+e._s(e.curExam.name))]),a("p",[e._v("考试试卷："+e._s(e.curExam.paperName))]),a("p",[e._v("考试时长："+e._s(e.curExam.duration)+" 分钟")]),1===e.curExam.limitTime?a("p",[e._v("开始时间："+e._s(e.curExam.startTime))]):e._e(),1===e.curExam.limitTime?a("p",[e._v("结束时间："+e._s(e.curExam.endTime))]):e._e(),a("p",[e._v("注意事项："+e._s(e.curExam.notice))]),1===e.curExam.privilege?a("p",[e._v(" 输入密码："),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入密码"},model:{value:e.curPassword,callback:function(t){e.curPassword=t},expression:"curPassword"}})],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitStart}},[e._v("确 定")])],1)]),a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"考试名",align:"center",width:"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleStart(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"paperName",label:"所用试卷",align:"center"}}),a("el-table-column",{attrs:{prop:"duration",label:"考试时长",align:"center"}}),a("el-table-column",{attrs:{prop:"startTime",label:"考试开始时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.limitTime?a("span",[e._v("不限制考试时间")]):a("span",[e._v(e._s(t.row.startTime))])]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"考试结束时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.limitTime?a("span",[e._v("不限制考试时间")]):a("span",[e._v(e._s(t.row.endTime))])]}}])}),a("el-table-column",{attrs:{prop:"privilege",label:"考试权限",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.privilege?a("span",{staticStyle:{color:"green"}},[e._v("完全开放")]):a("span",{staticStyle:{color:"red"}},[e._v("需要密码")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.handleStart(t.row)}}},[e._v("开始考试")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{background:"","current-page":e.queryParam.page,"page-sizes":[5,10,20,50],"page-size":e.queryParam.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"page",t)},"update:current-page":function(t){return e.$set(e.queryParam,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i=a("5530"),s=(a("b0c0"),a("2f62")),l=a("5c96"),u=a("6724"),o=a("b4a7"),c={name:"ExamList",directives:{waves:u["a"]},data:function(){return{tableData:[],recordTotal:0,queryParam:{page:1,limit:10,startTime:null,endTime:null},dialogVisible:!1,curExam:{id:null,name:null,paperName:null,duration:0,limitTime:0,startTime:null,endTime:null,notice:null,showState:0,privilege:0,password:""},curPassword:null,timeValue:[],rules:{paperId:[{required:!0,message:"请选择考试试卷",trigger:"blur"}],name:[{required:!0,message:"请输入考试名",trigger:"blur"}],duration:[{required:!0,message:"请输入考试时长",trigger:"blur"}]},examId:null}},computed:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["id","name","roles","avatar"])),{},{formTitle:function(){return 0===this.formType?"添加记录":"修改记录"}}),watch:{timeValue:{handler:function(){this.queryParam.startTime=this.getyyyyMMdd(this.timeValue[0]),this.queryParam.endTime=this.getyyyyMMdd(this.timeValue[1])}}},created:function(){this.queryPage()},methods:{getyyyyMMdd:function(e){var t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),n=e.getHours(),i=e.getMinutes(),s=e.getSeconds();String(a).length<2&&(a="0"+a),String(r).length<2&&(r="0"+r),String(n).length<2&&(n="0"+n),String(i).length<2&&(i="0"+i),String(s).length<2&&(s="0"+s);var l=t+"-"+a+"-"+r+" "+n+":"+i+":"+s;return l},queryPage:function(){var e=this;Object(o["h"])(this.queryParam).then((function(t){200===t.status&&(e.tableData=t.data,e.recordTotal=t.count)}))},handleSizeChange:function(e){this.queryParam.limit=e,this.queryPage()},handleCurrentChange:function(e){this.queryParam.page=e,this.queryPage()},handleFilter:function(){this.queryParam.page=1,this.queryPage()},handleShowAll:function(){this.queryParam.page=1,this.queryParam.name=null,this.queryParam.startTime=null,this.queryParam.endTime=null,this.timeValue=[],this.queryPage()},handleStart:function(e){this.curExam=e,this.dialogVisible=!0},submitStart:function(){var e=this;if(1===this.curExam.limitTime){var t=(new Date).getTime(),a=new Date(this.curExam.startTime).getTime(),r=new Date(this.curExam.endTime).getTime();if(t<a)return void this.$message.error("考试还没有开始");if(t>r)return void this.$message.error("考试已经结束了")}if(1===this.curExam.privilege)Object(o["a"])({examId:this.curExam.id,password:this.curPassword}).then((function(t){if(200===t.status){var a=e,r=l["Loading"].service({text:"正在努力创建试卷...",background:"rgba(0, 0, 0, 0.7)"});Object(o["c"])({studentId:a.id,examId:a.curExam.id}).then((function(t){200===t.status?(e.$message({message:"试卷创建成功，即将进入考试！",type:"success"}),setTimeout((function(){r.close(),a.dialogVisible=!1,a.$router.push({name:"RunExam",params:{studentExamId:t.data}})}),1e3)):(e.$message.error(t.message),r.close())})).catch((function(){r.close()}))}else e.$message.error("考试密码错误")}));else{var n=this,i=l["Loading"].service({text:"正在努力创建试卷...",background:"rgba(0, 0, 0, 0.7)"});Object(o["c"])({studentId:n.id,examId:n.curExam.id}).then((function(t){200===t.status?(e.$message({message:"试卷创建成功，即将进入考试！",type:"success"}),setTimeout((function(){i.close(),n.dialogVisible=!1,n.$router.push({name:"RunExam",params:{studentExamId:t.data}})}),1e3)):(e.$message.error(t.message),i.close())})).catch((function(){i.close()}))}}}},d=c,m=a("2877"),p=Object(m["a"])(d,r,n,!1,null,"4705d95c",null);t["default"]=p.exports},6724:function(e,t,a){"use strict";a("8d41");var r="@@wavesContext";function n(e,t){function a(a){var r=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),i=n.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var s=i.getBoundingClientRect(),l=i.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",i.appendChild(l)),n.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=n.color,l.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=a:e[r]={removeHandle:a},a}var i={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},s=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(s)),i.install=s;t["a"]=i},"8d41":function(e,t,a){},b4a7:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"i",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"d",(function(){return m}));var r=a("b775");function n(e){return Object(r["a"])({url:"/student/exam/queryPage",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/student/exam/checkPassword",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/student/exam/createStudentExam",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/student/exam/getExamInfo",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/student/exam/getQuestion",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/student/exam/saveAnswer",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/student/exam/commitPaper",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/student/exam/getScore",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/student/exam/getDetail",method:"get",params:e})}}}]);