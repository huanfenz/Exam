(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f43dc3c8"],{"5bc3":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:24}},[n("el-card",{staticStyle:{"margin-bottom":"10px"}},[t._v(" 距离考试结束还有："),n("span",{staticStyle:{color:"#ff0000"}},[t._v(t._s(t.min)+"分钟"+t._s(t.sec)+"秒")]),n("el-button",{staticStyle:{float:"right","margin-top":"-10px"},attrs:{type:"primary",icon:"el-icon-plus",loading:t.loading},on:{click:t.handlerCommit}},[t._v("交卷")])],1)],1),n("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:6,xs:24}},[n("el-card",[n("p",{staticClass:"card-title"},[t._v("答题卡")]),n("el-row",{staticClass:"card-line",staticStyle:{"padding-left":"10px"},attrs:{gutter:24}},[n("el-tag",{attrs:{type:"info"}},[t._v("未作答")]),n("el-tag",{attrs:{type:"success"}},[t._v("已作答")])],1),t._l(t.questionList,(function(e,s){return n("div",{key:s},[null!=e&&e.length>0?n("div",[n("p",{staticClass:"card-title"},[t._v(t._s(t.answerCardTitle(s)))]),n("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(e,(function(e){return n("el-tag",{key:e.id,attrs:{type:t.answerCardClass(s,e.questionId,e.answer,e.options)},on:{click:function(n){return t.handleNumber(e)}}},[t._v(" "+t._s(e.orderNum)+" ")])})),1)],1):t._e()])}))],2)],1),n("el-col",{attrs:{span:18,xs:24}},[n("el-card",{staticClass:"qu-content"},[null!=t.curQuestion.type?n("p",[n("b",[t._v(t._s(t.curQuestion.type)+"（本题分值："+t._s(t.curQuestion.score)+"分）")])]):t._e(),null!=t.curQuestion.content?n("p",[t._v(" "+t._s(t.curQuestion.orderNum)+"."+t._s(t.curQuestion.content)+" ")]):t._e(),null!=t.curQuestion.image?n("p",[n("el-image",{staticStyle:{height:"100px"},attrs:{src:t.curQuestion.image}})],1):t._e(),"单选题"===t.curQuestion.type?n("div",[n("el-radio-group",{model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},t._l(t.curQuestion.options,(function(e,s){return n("el-radio",{key:e.id,class:t.radioValue===e.id?"optionIsChecked":"optionNotChecked",attrs:{label:e.id}},[t._v(" "+t._s(String.fromCharCode(65+s))+"."+t._s(e.content)+" "),null!=e.image?n("div",{staticStyle:{clear:"both"}},[n("el-image",{staticStyle:{height:"100px"},attrs:{src:e.image}})],1):t._e()])})),1)],1):t._e(),"多选题"===t.curQuestion.type?n("div",[n("el-checkbox-group",{model:{value:t.checkValue,callback:function(e){t.checkValue=e},expression:"checkValue"}},t._l(t.curQuestion.options,(function(e,s){return n("el-checkbox",{key:e.id,class:t.checkValue.includes(e.id)?"optionIsChecked":"optionNotChecked",attrs:{label:e.id}},[t._v(" "+t._s(String.fromCharCode(65+s))+"."+t._s(e.content)+" "),null!=e.image?n("div",{staticStyle:{clear:"both"}},[n("el-image",{staticStyle:{height:"100px"},attrs:{src:e.image}})],1):t._e()])})),1)],1):t._e(),"判断题"===t.curQuestion.type?n("div",[n("el-radio-group",{model:{value:t.questionList[2][t.curQuestion.orderNum-1].answer,callback:function(e){t.$set(t.questionList[2][t.curQuestion.orderNum-1],"answer",e)},expression:"questionList[2][curQuestion.orderNum - 1].answer"}},[n("el-radio",{class:"true"==t.questionList[2][t.curQuestion.orderNum-1].answer?"optionIsChecked":"optionNotChecked",attrs:{label:"true"}},[t._v("正确")]),n("el-radio",{class:"false"==t.questionList[2][t.curQuestion.orderNum-1].answer?"optionIsChecked":"optionNotChecked",attrs:{label:"false"}},[t._v("错误")])],1)],1):t._e(),"填空题"===t.curQuestion.type?n("div",[n("el-input",{attrs:{placeholder:"请输入您的答案"},model:{value:t.questionList[3][t.curQuestion.orderNum-1].answer,callback:function(e){t.$set(t.questionList[3][t.curQuestion.orderNum-1],"answer",e)},expression:"questionList[3][curQuestion.orderNum - 1].answer"}})],1):t._e(),"简答题"===t.curQuestion.type?n("div",[n("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入您的答案"},model:{value:t.questionList[4][t.curQuestion.orderNum-1].answer,callback:function(e){t.$set(t.questionList[4][t.curQuestion.orderNum-1],"answer",e)},expression:"questionList[4][curQuestion.orderNum - 1].answer"}})],1):t._e(),n("div",{staticStyle:{"margin-top":"20px"}},[t.showPrevious?n("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:function(e){return t.handlePrevious()}}},[t._v(" 上一题 ")]):t._e(),t.showNext?n("el-button",{attrs:{type:"warning",icon:"el-icon-right"},on:{click:function(e){return t.handleNext()}}},[t._v(" 下一题 ")]):t._e()],1)])],1)],1)],1)},i=[],u=(n("caad"),n("2532"),n("b4a7")),o={name:"ExamRun",data:function(){return{studentExamId:null,loading:!1,examInfo:null,questionList:[[{id:null,type:null,questionId:null,orderNum:null,score:null,isAnswered:null,answer:null,options:[{id:null,studentQuestionId:null,optionId:null,isChecked:0,orderNum:null,abc:null}]}],[],[],[],[]],curQuestion:{questionId:null,type:null,content:null,image:null,options:[],orderNum:null},leftSeconds:0,radioValue:null,checkValue:[],min:"00",sec:"00"}},computed:{showPrevious:function(){var t=this.getFirstQuestion();return this.curQuestion.questionId!==t.questionId},showNext:function(){var t=this.getLastQuestion();return this.curQuestion.questionId!==t.questionId}},watch:{radioValue:{handler:function(){for(var t=this.getQuestionIndex(),e=this.questionList[0][t].options,n=0;n<e.length;n++)e[n].optionId===this.radioValue?e[n].isChecked=1:e[n].isChecked=0}},checkValue:{handler:function(){for(var t=this.getQuestionIndex(),e=this.questionList[1][t].options,n=0;n<e.length;n++)this.checkValue.includes(e[n].optionId)?e[n].isChecked=1:e[n].isChecked=0}}},created:function(){var t=this;this.studentExamId=this.$route.params.studentExamId,null!=this.studentExamId&&Object(u["e"])({studentExamId:this.studentExamId}).then((function(e){if(200===e.status){var n=e.data;t.examInfo=n.examInfo,t.questionList=n.questionList,t.leftSeconds=n.leftSeconds;var s=t.getFirstQuestion();t.fetchQuestion(s.questionId),t.countdown()}}))},methods:{countdown:function(){var t=this.leftSeconds;if(t<0)this.commitPaper();else{var e=parseInt(t/60%60),n=parseInt(t%60);this.min=e>9?e:"0"+e,this.sec=n>9?n:"0"+n;var s=this;this.leftSeconds-=1,setTimeout((function(){s.countdown()}),1e3)}},answerCardTitle:function(t){switch(t){case 0:return"单选题";case 1:return"多选题";case 2:return"判断题";case 3:return"填空题";case 4:return"简答题"}return null},answerCardClass:function(t,e,n,s){if(null!=this.curQuestion){if(e===this.curQuestion.questionId)return"warning";if(0===t||1===t){for(var i=!1,u=0;u<s.length;u++)if(1===s[u].isChecked){i=!0;break}return!0===i?"success":"info"}return null!=n&&n.length>0?"success":"info"}},getFirstQuestion:function(){for(var t=null,e=0;e<5;e++)if(this.questionList[e].length>0){t=this.questionList[e][0];break}return t},getLastQuestion:function(){for(var t=null,e=4;e>=0;e--)if(this.questionList[e].length>0){t=this.questionList[e][this.questionList[e].length-1];break}return t},fetchQuestion:function(t){var e=this;Object(u["f"])({paperId:this.examInfo.paperId,questionId:t}).then((function(t){if(200===t.status){e.curQuestion=t.data;var n=e.getQuestionIndex();if("单选题"===e.curQuestion.type)for(var s=e.questionList[0][n].options,i=0;i<s.length;i++)1===s[i].isChecked&&(e.radioValue=s[i].optionId);else if("多选题"===e.curQuestion.type){var u=e.questionList[1][n].options;e.checkValue=[];for(var o=0;o<u.length;o++)1===u[o].isChecked&&e.checkValue.push(u[o].optionId)}}}))},getTypeIndex:function(){var t,e=this.curQuestion.type;return"单选题"===e?t=0:"多选题"===e?t=1:"判断题"===e?t=2:"填空题"===e?t=3:"简答题"===e&&(t=4),t},getQuestionIndex:function(){return this.curQuestion.orderNum-1},saveCurAnswer:function(t){var e=this.getTypeIndex(),n=this.getQuestionIndex(),s=this.questionList[e][n],i=s.id,o=s.answer,r=s.options;Object(u["i"])({studentQuestionId:i,answer:o,studentOptions:r}).then((function(e){200===e.status&&t&&t()}))},handleNumber:function(t){var e=this,n=function(){e.fetchQuestion(t.questionId)};this.saveCurAnswer(n)},handleNext:function(){var t=this.getTypeIndex(),e=this.getQuestionIndex();e++;while(e===this.questionList[t].length){if(t++,t===this.questionList.length)return!1;e=0}var n=this.questionList[t][e];this.handleNumber(n)},handlePrevious:function(){var t=this.getTypeIndex(),e=this.getQuestionIndex();e--;while(-1===e){if(t--,-1===t)return!1;e=this.questionList[t].length-1}var n=this.questionList[t][e];this.handleNumber(n)},commitPaper:function(){var t=this,e=function(){Object(u["b"])({studentExamId:t.studentExamId}).then((function(e){200===e.status&&t.$router.push({name:"ExamInfo",params:{studentExamId:t.studentExamId,showState:1}})}))};this.saveCurAnswer(e)},handlerCommit:function(){var t=this;this.$confirm("确定要交卷吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.commitPaper()}))}}},r=o,a=(n("7a24"),n("2877")),c=Object(a["a"])(r,s,i,!1,null,null,null);e["default"]=c.exports},"7a24":function(t,e,n){"use strict";n("8ed4")},"8ed4":function(t,e,n){},b4a7:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return h}));var s=n("b775");function i(t){return Object(s["a"])({url:"/student/exam/queryPage",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/student/exam/checkPassword",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/student/exam/createStudentExam",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/student/exam/getExamInfo",method:"get",params:t})}function a(t){return Object(s["a"])({url:"/student/exam/getQuestion",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/student/exam/saveAnswer",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/student/exam/commitPaper",method:"post",data:t})}function d(t){return Object(s["a"])({url:"/student/exam/getScore",method:"get",params:t})}function h(t){return Object(s["a"])({url:"/student/exam/getDetail",method:"get",params:t})}}}]);