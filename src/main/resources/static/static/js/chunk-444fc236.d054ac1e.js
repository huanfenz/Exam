(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-444fc236"],{"012f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"15px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}}),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" 搜索 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleShowAll}},[e._v(" 显示全部 ")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(" 添加用户 ")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handleDeleteSome}},[e._v(" 批量删除 ")])],1),a("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"身份",prop:"role"}},[a("el-radio",{attrs:{label:"管理员",disabled:1===e.form.id},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[e._v("管理员")]),a("el-radio",{attrs:{label:"学生",disabled:1===e.form.id},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[e._v("学生")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("div",{attrs:{align:"center"}},[a("h3",[e._v("点击下方图片上传头像")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://47.97.104.230:8093/system/upload/uploadImage","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.profile?a("el-image",{staticClass:"avatar",attrs:{src:e.form.profile,alt:"封面无法显示"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1),a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-avatar",{key:e.row.profile,attrs:{size:"large",src:e.row.profile}},[a("img",{attrs:{src:"http://wangpeng-imgsubmit.oss-cn-hangzhou.aliyuncs.com/img/202203231718487.png"}})])]}}])}),a("el-table-column",{attrs:{label:"用户名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(e._s(t.row.username))])]}}])}),a("el-table-column",{attrs:{label:"用户身份",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["管理员"===t.row.role?a("el-tag",{attrs:{type:"warning"}},[e._v("管理员")]):a("el-tag",{attrs:{type:"success"}},[e._v("学生")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{background:"","current-page":e.queryParam.page,"page-sizes":[5,10,20,50],"page-size":e.queryParam.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"page",t)},"update:current-page":function(t){return e.$set(e.queryParam,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],l=(a("a434"),a("6724")),s=a("e17e"),i={name:"UserList",directives:{waves:l["a"]},data:function(){return{tableData:[],recordTotal:0,queryParam:{page:1,limit:10,username:null},dialogFormVisible:!1,formType:0,form:{id:null,username:null,password:null,role:"管理员",profile:null},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{formTitle:function(){return 0===this.formType?"添加记录":"修改记录"}},created:function(){this.queryPage()},methods:{queryPage:function(){var e=this;Object(s["f"])(this.queryParam).then((function(t){200===t.status&&(e.tableData=t.data,e.recordTotal=t.count)}))},handleSizeChange:function(e){this.queryParam.limit=e,this.queryPage()},handleCurrentChange:function(e){this.queryParam.page=e,this.queryPage()},handleFilter:function(){this.queryParam.page=1,this.queryPage()},handleShowAll:function(){this.queryParam.page=1,this.queryParam.username=null,this.queryPage()},handleCreate:function(){this.formType=0,this.form={id:null,username:null,password:null,role:"学生",profile:null},this.dialogFormVisible=!0},handleUpdate:function(e){this.formType=1,this.form={id:e.id,username:e.username,password:e.password,role:e.role,profile:e.profile},this.dialogFormVisible=!0},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return e.$message.error("不允许提交，请检查必填项"),!1;0===e.formType?Object(s["a"])(e.form).then((function(t){200===t.status?(e.$message.success("添加记录成功"),Object(s["d"])().then((function(t){e.recordTotal=t.data,e.queryParam.page=Math.ceil(e.recordTotal/e.queryParam.limit),e.handleCurrentChange(e.queryParam.page)}))):501===t.status?e.$message.error(t.message):e.$message.error("添加记录失败"),e.dialogFormVisible=!1})):1===e.formType&&Object(s["g"])(e.form).then((function(t){200===t.status?(e.$message.success("更新记录成功"),e.queryPage(),e.dialogFormVisible=!1):501===t.status?e.$message.error(t.message):e.$message.error("更新记录失败")}))}))},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除该条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(e).then((function(e){200===e.status?(a.$message.success("删除记录成功"),a.tableData.splice(t,1),0===a.tableData.length&&(a.queryParam.page=a.queryParam.page-1,a.handleCurrentChange(a.queryParam.page))):a.$message.error(e.message)}))}))},handleDeleteSome:function(){var e=this,t=this.$refs.multipleTable.selection;0!==t.length?this.$confirm("确定要删除这些记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t).then((function(a){200===a.status?(e.$message.success("批量删除记录成功"),e.tableData.length===t.length&&0!==e.queryParam.page&&(e.queryParam.page=e.queryParam.page-1)):e.$message.error(a.message),e.handleCurrentChange(e.queryParam.page)}))})):this.$message.error("至少选择一条记录")},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,r=e.size/1024/1024<2;return t||a?!!r||(this.$message.error("上传封面图片大小不能超过 2MB!"),!1):(this.$message.error("只能上传 jpg 和 png 图片"),!1)},handleAvatarSuccess:function(e,t){console.log(t),200===e.status?(this.$message.success(e.message),this.form.profile=e.data):this.$message.error(e.message)}}},o=i,u=a("2877"),c=Object(u["a"])(o,r,n,!1,null,"4e13f62a",null);t["default"]=c.exports},6724:function(e,t,a){"use strict";a("8d41");var r="@@wavesContext";function n(e,t){function a(a){var r=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),l=n.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var s=l.getBoundingClientRect(),i=l.querySelector(".waves-ripple");switch(i?i.className="waves-ripple":(i=document.createElement("span"),i.className="waves-ripple",i.style.height=i.style.width=Math.max(s.width,s.height)+"px",l.appendChild(i)),n.type){case"center":i.style.top=s.height/2-i.offsetHeight/2+"px",i.style.left=s.width/2-i.offsetWidth/2+"px";break;default:i.style.top=(a.pageY-s.top-i.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",i.style.left=(a.pageX-s.left-i.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return i.style.backgroundColor=n.color,i.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=a:e[r]={removeHandle:a},a}var l={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},s=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(s)),l.install=s;t["a"]=l},"8d41":function(e,t,a){},a434:function(e,t,a){"use strict";var r=a("23e7"),n=a("23cb"),l=a("a691"),s=a("50c4"),i=a("7b0b"),o=a("65f0"),u=a("8418"),c=a("1dde"),m=a("ae40"),d=c("splice"),f=m("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,h=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var a,r,c,m,d,f,b=i(this),v=s(b.length),w=n(e,v),q=arguments.length;if(0===q?a=r=0:1===q?(a=0,r=v-w):(a=q-2,r=g(p(l(t),0),v-w)),v+a-r>h)throw TypeError(y);for(c=o(b,r),m=0;m<r;m++)d=w+m,d in b&&u(c,m,b[d]);if(c.length=r,a<r){for(m=w;m<v-r;m++)d=m+r,f=m+a,d in b?b[f]=b[d]:delete b[f];for(m=v;m>v-r+a;m--)delete b[m-1]}else if(a>r)for(m=v-r;m>w;m--)d=m+r-1,f=m+a-1,d in b?b[f]=b[d]:delete b[f];for(m=0;m<a;m++)b[m+w]=arguments[m+2];return b.length=v-r+a,c}})},e17e:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return u})),a.d(t,"g",(function(){return c}));var r=a("b775");function n(){return Object(r["a"])({url:"/admin/user/getCount",method:"get"})}function l(){return Object(r["a"])({url:"/admin/user/queryAll",method:"get"})}function s(e){return Object(r["a"])({url:"/admin/user/queryPage",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/admin/user/addOne",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/user/deleteOne",method:"delete",data:e})}function u(e){return Object(r["a"])({url:"/admin/user/deleteSome",method:"delete",data:e})}function c(e){return Object(r["a"])({url:"/admin/user/updateOne",method:"put",data:e})}}}]);